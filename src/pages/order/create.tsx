import React from "react";
import { ChevronDown, CircleCheck, Location, Pin, RadioDot } from "../store/icons";
import Logo from "../../static/icons/logo.svg";
import Gold from "../../static/images/gold.png";
import { useNavigate } from "react-router-dom";
import { Modal, Sheet } from "zmp-ui";

export default function OrderCreatePage() {
  const navigate = useNavigate();
  const [openCart, setOpenCart] = React.useState(false);
  const items: CartItem[] = [
    { id: "1", name: "Cocacola", price: 120000, img: "https://images.unsplash.com/photo-1604908176997-431b5b59c17c?w=300&q=80" },
    { id: "2", name: "Cocacola", price: 120000, img: "https://images.unsplash.com/photo-1604908176997-431b5b59c17c?w=300&q=80" },
    { id: "3", name: "Cocacola", price: 120000, img: "https://images.unsplash.com/photo-1517705008128-361805f42e86?w=300&q=80" },
  ];
  const categories = [
    { id: 1, name: "Nước", count: 5, active: true },
    { id: 2, name: "Cơm", count: 5 },
    { id: 3, name: "Khác", count: 5 },
  ];
  const products = [
    { id: 1, name: "Cocacola", price: 120000, image: "" },
    { id: 2, name: "Redbull", price: 120000, image: "https://via.placeholder.com/80x80.png?text=Redbull" },
    { id: 3, name: "7Up", price: 120000, image: "https://via.placeholder.com/80x80.png?text=7Up" },
    { id: 4, name: "Fanta", price: 120000, image: "https://via.placeholder.com/80x80.png?text=Fanta" },
    { id: 5, name: "Sting", price: 120000, image: "" },
  ];
  return (
    <div className="mx-auto w-full bg-white text-[#141518]">

      {/* Hero / Brand */}
      <div
        style={{
          background: `url(${Gold})`,
          backgroundRepeat: 'no-repeat',
          backgroundPositionY: -70,
          backgroundPositionX: 'right'
        }}
        className="relative overflow-hidden px-4 pt-5">
        <h1 className="mb-1 text-[20px] font-semibold leading-tight tracking-tight pt-4">
          Chọn sản phẩm
        </h1>
        <div className="border-[#E1E1E2] rounded-xl border p-4 mt-4 bg-white flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M20 5.75H14C13.59 5.75 13.25 5.41 13.25 5C13.25 4.59 13.59 4.25 14 4.25H20C20.41 4.25 20.75 4.59 20.75 5C20.75 5.41 20.41 5.75 20 5.75Z" fill="#A8A29F" />
            <path d="M17 8.75H14C13.59 8.75 13.25 8.41 13.25 8C13.25 7.59 13.59 7.25 14 7.25H17C17.41 7.25 17.75 7.59 17.75 8C17.75 8.41 17.41 8.75 17 8.75Z" fill="#A8A29F" />
            <path d="M11.5 21.75C5.85 21.75 1.25 17.15 1.25 11.5C1.25 5.85 5.85 1.25 11.5 1.25C11.91 1.25 12.25 1.59 12.25 2C12.25 2.41 11.91 2.75 11.5 2.75C6.67 2.75 2.75 6.68 2.75 11.5C2.75 16.32 6.67 20.25 11.5 20.25C16.33 20.25 20.25 16.32 20.25 11.5C20.25 11.09 20.59 10.75 21 10.75C21.41 10.75 21.75 11.09 21.75 11.5C21.75 17.15 17.15 21.75 11.5 21.75Z" fill="#A8A29F" />
            <path d="M22 22.75C21.81 22.75 21.62 22.68 21.47 22.53L19.47 20.53C19.18 20.24 19.18 19.76 19.47 19.47C19.76 19.18 20.24 19.18 20.53 19.47L22.53 21.47C22.82 21.76 22.82 22.24 22.53 22.53C22.38 22.68 22.19 22.75 22 22.75Z" fill="#A8A29F" />
          </svg>
          <input type="text" className="w-full pl-2 text-[15px] placeholder:text-[#9CA3AF] focus:outline-none" placeholder="Nhập từ khóa để tìm kiếm" />
        </div>

        {/* Tabs */}
        <div className="flex gap-3 mt-4">
          {categories.map((c) => (
            <button
              key={c.id}
              className={`flex items-center gap-1 rounded-xl px-3 py-1 text-[14px] font-medium ${c.active
                ? "border border-orange-400 bg-orange-50 text-orange-500"
                : "border border-gray-200 bg-gray-100 text-gray-600"
                }`}
            >
              {c.name}
              <span className="text-[13px] font-semibold">{c.count}</span>
            </button>
          ))}
        </div>

        {/* Product list */}
        <div className="grid grid-cols-2 gap-4 mt-4">
          {products.map((p) => (
            <div
              key={p.id}
              className="flex items-center gap-3 rounded-2xl border border-gray-200 bg-white p-3 shadow-sm"
            >
              <div className="h-14 w-14 flex-shrink-0 overflow-hidden rounded-xl bg-gray-100">
                {p.image ? (
                  <img src={p.image} alt={p.name} className="h-full w-full object-cover" />
                ) : (
                  <PlaceholderIcon />
                )}
              </div>
              <div>
                <div className="text-[13px] font-bold text-gray-800">{p.name}</div>
                <div className="text-[13px] text-gray-500">{p.price.toLocaleString("vi-VN")}đ</div>
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Spacer for bottom CTA */}
      <div className="h-28" />

      {/* Bottom CTA */}
      <div className="fixed inset-x-0 bottom-0 z-10 flex items-center gap-4 mx-auto w-full bg-white/80 p-4 backdrop-blur pb-10">
        <button onClick={() => setOpenCart(true)} className="flex items-center justify-center gap-3 h-14 w-full rounded-2xl bg-white text-base font-semibold text-[#101828] border border-[#CBD5E1]">
          <span className="min-w-6">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M2 1.75H3.74023C4.32535 1.75006 4.8803 1.99821 5.27734 2.4248H5.27832C5.50044 2.67166 5.66122 2.95434 5.74902 3.26562L5.85156 3.62988H18.7197C19.5392 3.62988 20.2919 3.93289 20.8643 4.48047L20.9766 4.59375C21.5512 5.22274 21.8401 6.03428 21.7715 6.90039V6.9043L21.2314 14.4043L21.2305 14.4102C21.1365 15.9712 19.7605 17.2498 18.1904 17.25H7.54004C6.69104 17.25 5.87474 16.8891 5.29883 16.2617C4.72254 15.6338 4.42969 14.7913 4.49805 13.9414L5.32715 3.9873L5.32812 3.98828C5.37284 3.52625 5.2067 3.08855 4.90918 2.7627C4.59894 2.42298 4.17218 2.25012 3.73047 2.25H2C1.86614 2.25 1.75 2.13386 1.75 2C1.75 1.86614 1.86614 1.75 2 1.75ZM5.78027 4.58789L5.00195 13.9766C4.9398 14.6976 5.17757 15.3849 5.65918 15.916C6.14759 16.4545 6.82446 16.7402 7.54004 16.7402H18.1904C19.495 16.74 20.6483 15.6552 20.748 14.3584L20.749 14.3555L21.2891 6.85547V6.85352C21.3377 6.13481 21.105 5.43406 20.6113 4.91504C20.1235 4.39257 19.4515 4.11047 18.7305 4.11035H5.78027V4.58789Z" fill="#56524E" />
              <path d="M2 1.75H3.74023C4.32535 1.75006 4.8803 1.99821 5.27734 2.4248H5.27832C5.50044 2.67166 5.66122 2.95434 5.74902 3.26562L5.85156 3.62988H18.7197C19.5392 3.62988 20.2919 3.93289 20.8643 4.48047L20.9766 4.59375C21.5512 5.22274 21.8401 6.03428 21.7715 6.90039V6.9043L21.2314 14.4043L21.2305 14.4102C21.1365 15.9712 19.7605 17.2498 18.1904 17.25H7.54004C6.69104 17.25 5.87474 16.8891 5.29883 16.2617C4.72254 15.6338 4.42969 14.7913 4.49805 13.9414L5.32715 3.9873L5.32812 3.98828C5.37284 3.52625 5.2067 3.08855 4.90918 2.7627C4.59894 2.42298 4.17218 2.25012 3.73047 2.25H2C1.86614 2.25 1.75 2.13386 1.75 2C1.75 1.86614 1.86614 1.75 2 1.75ZM5.78027 4.58789L5.00195 13.9766C4.9398 14.6976 5.17757 15.3849 5.65918 15.916C6.14759 16.4545 6.82446 16.7402 7.54004 16.7402H18.1904C19.495 16.74 20.6483 15.6552 20.748 14.3584L20.749 14.3555L21.2891 6.85547V6.85352C21.3377 6.13481 21.105 5.43406 20.6113 4.91504C20.1235 4.39257 19.4515 4.11047 18.7305 4.11035H5.78027V4.58789Z" stroke="#1A1A1A" />
              <path d="M2 1.75H3.74023C4.32535 1.75006 4.8803 1.99821 5.27734 2.4248H5.27832C5.50044 2.67166 5.66122 2.95434 5.74902 3.26562L5.85156 3.62988H18.7197C19.5392 3.62988 20.2919 3.93289 20.8643 4.48047L20.9766 4.59375C21.5512 5.22274 21.8401 6.03428 21.7715 6.90039V6.9043L21.2314 14.4043L21.2305 14.4102C21.1365 15.9712 19.7605 17.2498 18.1904 17.25H7.54004C6.69104 17.25 5.87474 16.8891 5.29883 16.2617C4.72254 15.6338 4.42969 14.7913 4.49805 13.9414L5.32715 3.9873L5.32812 3.98828C5.37284 3.52625 5.2067 3.08855 4.90918 2.7627C4.59894 2.42298 4.17218 2.25012 3.73047 2.25H2C1.86614 2.25 1.75 2.13386 1.75 2C1.75 1.86614 1.86614 1.75 2 1.75ZM5.78027 4.58789L5.00195 13.9766C4.9398 14.6976 5.17757 15.3849 5.65918 15.916C6.14759 16.4545 6.82446 16.7402 7.54004 16.7402H18.1904C19.495 16.74 20.6483 15.6552 20.748 14.3584L20.749 14.3555L21.2891 6.85547V6.85352C21.3377 6.13481 21.105 5.43406 20.6113 4.91504C20.1235 4.39257 19.4515 4.11047 18.7305 4.11035H5.78027V4.58789Z" stroke="white" stroke-opacity="0.1" />
              <path d="M16.25 19.25C17.0739 19.25 17.75 19.9261 17.75 20.75C17.75 21.5739 17.0739 22.25 16.25 22.25C15.4261 22.25 14.75 21.5739 14.75 20.75C14.75 19.9261 15.4261 19.25 16.25 19.25ZM16.25 19.75C15.6939 19.75 15.25 20.1939 15.25 20.75C15.25 21.3061 15.6939 21.75 16.25 21.75C16.8061 21.75 17.25 21.3061 17.25 20.75C17.25 20.1939 16.8061 19.75 16.25 19.75Z" fill="#56524E" />
              <path d="M16.25 19.25C17.0739 19.25 17.75 19.9261 17.75 20.75C17.75 21.5739 17.0739 22.25 16.25 22.25C15.4261 22.25 14.75 21.5739 14.75 20.75C14.75 19.9261 15.4261 19.25 16.25 19.25ZM16.25 19.75C15.6939 19.75 15.25 20.1939 15.25 20.75C15.25 21.3061 15.6939 21.75 16.25 21.75C16.8061 21.75 17.25 21.3061 17.25 20.75C17.25 20.1939 16.8061 19.75 16.25 19.75Z" stroke="#1A1A1A" />
              <path d="M16.25 19.25C17.0739 19.25 17.75 19.9261 17.75 20.75C17.75 21.5739 17.0739 22.25 16.25 22.25C15.4261 22.25 14.75 21.5739 14.75 20.75C14.75 19.9261 15.4261 19.25 16.25 19.25ZM16.25 19.75C15.6939 19.75 15.25 20.1939 15.25 20.75C15.25 21.3061 15.6939 21.75 16.25 21.75C16.8061 21.75 17.25 21.3061 17.25 20.75C17.25 20.1939 16.8061 19.75 16.25 19.75Z" stroke="white" stroke-opacity="0.1" />
              <path d="M8.25 19.25C9.07386 19.25 9.75 19.9261 9.75 20.75C9.75 21.5739 9.07386 22.25 8.25 22.25C7.42614 22.25 6.75 21.5739 6.75 20.75C6.75 19.9261 7.42614 19.25 8.25 19.25ZM8.25 19.75C7.69386 19.75 7.25 20.1939 7.25 20.75C7.25 21.3061 7.69386 21.75 8.25 21.75C8.80614 21.75 9.25 21.3061 9.25 20.75C9.25 20.1939 8.80614 19.75 8.25 19.75Z" fill="#56524E" />
              <path d="M8.25 19.25C9.07386 19.25 9.75 19.9261 9.75 20.75C9.75 21.5739 9.07386 22.25 8.25 22.25C7.42614 22.25 6.75 21.5739 6.75 20.75C6.75 19.9261 7.42614 19.25 8.25 19.25ZM8.25 19.75C7.69386 19.75 7.25 20.1939 7.25 20.75C7.25 21.3061 7.69386 21.75 8.25 21.75C8.80614 21.75 9.25 21.3061 9.25 20.75C9.25 20.1939 8.80614 19.75 8.25 19.75Z" stroke="#1A1A1A" />
              <path d="M8.25 19.25C9.07386 19.25 9.75 19.9261 9.75 20.75C9.75 21.5739 9.07386 22.25 8.25 22.25C7.42614 22.25 6.75 21.5739 6.75 20.75C6.75 19.9261 7.42614 19.25 8.25 19.25ZM8.25 19.75C7.69386 19.75 7.25 20.1939 7.25 20.75C7.25 21.3061 7.69386 21.75 8.25 21.75C8.80614 21.75 9.25 21.3061 9.25 20.75C9.25 20.1939 8.80614 19.75 8.25 19.75Z" stroke="white" stroke-opacity="0.1" />
              <path d="M9 7.75H21C21.1339 7.75 21.25 7.86614 21.25 8C21.25 8.13386 21.1339 8.25 21 8.25H9C8.86614 8.25 8.75 8.13386 8.75 8C8.75 7.86614 8.86614 7.75 9 7.75Z" fill="#56524E" />
              <path d="M9 7.75H21C21.1339 7.75 21.25 7.86614 21.25 8C21.25 8.13386 21.1339 8.25 21 8.25H9C8.86614 8.25 8.75 8.13386 8.75 8C8.75 7.86614 8.86614 7.75 9 7.75Z" stroke="#1A1A1A" />
              <path d="M9 7.75H21C21.1339 7.75 21.25 7.86614 21.25 8C21.25 8.13386 21.1339 8.25 21 8.25H9C8.86614 8.25 8.75 8.13386 8.75 8C8.75 7.86614 8.86614 7.75 9 7.75Z" stroke="white" stroke-opacity="0.1" />
            </svg>
          </span>
          Giỏ hàng <span className="text-[#FB923C] px-1 bg-[#FFF6EB] rounded-lg">5</span>
        </button>

        <button onClick={() => navigate("/pay")} className="flex items-center justify-center gap-3 h-14 w-full rounded-2xl bg-gradient-to-r from-[#FF9F2E] to-[#FF4D00] text-base font-semibold text-white shadow-[0_8px_16px_rgba(255,125,0,0.35)] active:scale-[0.99]">
          <span className="min-w-6">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
              <path d="M11.4502 8.23999H13.3301C14.3695 8.24004 15.25 9.12151 15.25 10.24C15.25 10.3738 15.1339 10.49 15 10.49C14.8661 10.49 14.75 10.3738 14.75 10.24C14.75 9.4554 14.1559 8.74004 13.3301 8.73999H11.4502C10.7328 8.73999 10.25 9.36837 10.25 10.0203C10.25 10.3137 10.2857 10.6144 10.4736 10.8552C10.6567 11.0896 10.9228 11.1781 11.0732 11.2312L11.0752 11.2322L14.085 12.282L14.0879 12.283C14.374 12.3814 14.656 12.5192 14.8682 12.7556C15.07 12.9807 15.25 13.342 15.25 13.9705C15.2498 14.9702 14.4677 15.7498 13.5498 15.7498H11.6699C10.6305 15.7497 9.75 14.8682 9.75 13.7498C9.75013 13.616 9.86622 13.4998 10 13.4998C10.1338 13.4998 10.2499 13.616 10.25 13.7498C10.25 14.5343 10.8441 15.2497 11.6699 15.2498H13.5498C14.2671 15.2498 14.7498 14.6222 14.75 13.9705C14.75 13.677 14.7144 13.3754 14.5264 13.1345C14.3433 12.9002 14.0772 12.8116 13.9268 12.7585L13.9248 12.7576L10.915 11.7078L10.9121 11.7068C10.626 11.6084 10.344 11.4715 10.1318 11.2351C9.92993 11.0101 9.75005 10.6489 9.75 10.0203C9.75 9.02885 10.5336 8.23999 11.4502 8.23999Z" fill="white" />
              <path d="M11.4502 8.23999H13.3301C14.3695 8.24004 15.25 9.12151 15.25 10.24C15.25 10.3738 15.1339 10.49 15 10.49C14.8661 10.49 14.75 10.3738 14.75 10.24C14.75 9.4554 14.1559 8.74004 13.3301 8.73999H11.4502C10.7328 8.73999 10.25 9.36837 10.25 10.0203C10.25 10.3137 10.2857 10.6144 10.4736 10.8552C10.6567 11.0896 10.9228 11.1781 11.0732 11.2312L11.0752 11.2322L14.085 12.282L14.0879 12.283C14.374 12.3814 14.656 12.5192 14.8682 12.7556C15.07 12.9807 15.25 13.342 15.25 13.9705C15.2498 14.9702 14.4677 15.7498 13.5498 15.7498H11.6699C10.6305 15.7497 9.75 14.8682 9.75 13.7498C9.75013 13.616 9.86622 13.4998 10 13.4998C10.1338 13.4998 10.2499 13.616 10.25 13.7498C10.25 14.5343 10.8441 15.2497 11.6699 15.2498H13.5498C14.2671 15.2498 14.7498 14.6222 14.75 13.9705C14.75 13.677 14.7144 13.3754 14.5264 13.1345C14.3433 12.9002 14.0772 12.8116 13.9268 12.7585L13.9248 12.7576L10.915 11.7078L10.9121 11.7068C10.626 11.6084 10.344 11.4715 10.1318 11.2351C9.92993 11.0101 9.75005 10.6489 9.75 10.0203C9.75 9.02885 10.5336 8.23999 11.4502 8.23999Z" stroke="white" />
              <path d="M11.4502 8.23999H13.3301C14.3695 8.24004 15.25 9.12151 15.25 10.24C15.25 10.3738 15.1339 10.49 15 10.49C14.8661 10.49 14.75 10.3738 14.75 10.24C14.75 9.4554 14.1559 8.74004 13.3301 8.73999H11.4502C10.7328 8.73999 10.25 9.36837 10.25 10.0203C10.25 10.3137 10.2857 10.6144 10.4736 10.8552C10.6567 11.0896 10.9228 11.1781 11.0732 11.2312L11.0752 11.2322L14.085 12.282L14.0879 12.283C14.374 12.3814 14.656 12.5192 14.8682 12.7556C15.07 12.9807 15.25 13.342 15.25 13.9705C15.2498 14.9702 14.4677 15.7498 13.5498 15.7498H11.6699C10.6305 15.7497 9.75 14.8682 9.75 13.7498C9.75013 13.616 9.86622 13.4998 10 13.4998C10.1338 13.4998 10.2499 13.616 10.25 13.7498C10.25 14.5343 10.8441 15.2497 11.6699 15.2498H13.5498C14.2671 15.2498 14.7498 14.6222 14.75 13.9705C14.75 13.677 14.7144 13.3754 14.5264 13.1345C14.3433 12.9002 14.0772 12.8116 13.9268 12.7585L13.9248 12.7576L10.915 11.7078L10.9121 11.7068C10.626 11.6084 10.344 11.4715 10.1318 11.2351C9.92993 11.0101 9.75005 10.6489 9.75 10.0203C9.75 9.02885 10.5336 8.23999 11.4502 8.23999Z" stroke="white" stroke-opacity="0.1" />
              <path d="M12.5 7.25C12.6339 7.25 12.75 7.36614 12.75 7.5V16.5C12.75 16.6339 12.6339 16.75 12.5 16.75C12.3661 16.75 12.25 16.6339 12.25 16.5V7.5C12.25 7.36614 12.3661 7.25 12.5 7.25Z" fill="white" />
              <path d="M12.5 7.25C12.6339 7.25 12.75 7.36614 12.75 7.5V16.5C12.75 16.6339 12.6339 16.75 12.5 16.75C12.3661 16.75 12.25 16.6339 12.25 16.5V7.5C12.25 7.36614 12.3661 7.25 12.5 7.25Z" stroke="white" />
              <path d="M12.5 7.25C12.6339 7.25 12.75 7.36614 12.75 7.5V16.5C12.75 16.6339 12.6339 16.75 12.5 16.75C12.3661 16.75 12.25 16.6339 12.25 16.5V7.5C12.25 7.36614 12.3661 7.25 12.5 7.25Z" stroke="white" stroke-opacity="0.1" />
              <path d="M12.5 1.75C12.6339 1.75 12.75 1.86614 12.75 2C12.75 2.13386 12.6339 2.25 12.5 2.25C7.12386 2.25 2.75 6.62386 2.75 12C2.75 17.3761 7.12386 21.75 12.5 21.75C17.8761 21.75 22.25 17.3761 22.25 12C22.25 11.8661 22.3661 11.75 22.5 11.75C22.6339 11.75 22.75 11.8661 22.75 12C22.75 17.6539 18.1539 22.25 12.5 22.25C6.84614 22.25 2.25 17.6539 2.25 12C2.25 6.34614 6.84614 1.75 12.5 1.75Z" fill="white" />
              <path d="M12.5 1.75C12.6339 1.75 12.75 1.86614 12.75 2C12.75 2.13386 12.6339 2.25 12.5 2.25C7.12386 2.25 2.75 6.62386 2.75 12C2.75 17.3761 7.12386 21.75 12.5 21.75C17.8761 21.75 22.25 17.3761 22.25 12C22.25 11.8661 22.3661 11.75 22.5 11.75C22.6339 11.75 22.75 11.8661 22.75 12C22.75 17.6539 18.1539 22.25 12.5 22.25C6.84614 22.25 2.25 17.6539 2.25 12C2.25 6.34614 6.84614 1.75 12.5 1.75Z" stroke="white" />
              <path d="M12.5 1.75C12.6339 1.75 12.75 1.86614 12.75 2C12.75 2.13386 12.6339 2.25 12.5 2.25C7.12386 2.25 2.75 6.62386 2.75 12C2.75 17.3761 7.12386 21.75 12.5 21.75C17.8761 21.75 22.25 17.3761 22.25 12C22.25 11.8661 22.3661 11.75 22.5 11.75C22.6339 11.75 22.75 11.8661 22.75 12C22.75 17.6539 18.1539 22.25 12.5 22.25C6.84614 22.25 2.25 17.6539 2.25 12C2.25 6.34614 6.84614 1.75 12.5 1.75Z" stroke="white" stroke-opacity="0.1" />
              <path d="M17.5 2.75C17.6339 2.75 17.75 2.86614 17.75 3V6.75H21.5C21.6339 6.75 21.75 6.86614 21.75 7C21.75 7.13386 21.6339 7.25 21.5 7.25H17.5C17.3661 7.25 17.25 7.13386 17.25 7V3C17.25 2.86614 17.3661 2.75 17.5 2.75Z" fill="white" />
              <path d="M17.5 2.75C17.6339 2.75 17.75 2.86614 17.75 3V6.75H21.5C21.6339 6.75 21.75 6.86614 21.75 7C21.75 7.13386 21.6339 7.25 21.5 7.25H17.5C17.3661 7.25 17.25 7.13386 17.25 7V3C17.25 2.86614 17.3661 2.75 17.5 2.75Z" stroke="white" />
              <path d="M17.5 2.75C17.6339 2.75 17.75 2.86614 17.75 3V6.75H21.5C21.6339 6.75 21.75 6.86614 21.75 7C21.75 7.13386 21.6339 7.25 21.5 7.25H17.5C17.3661 7.25 17.25 7.13386 17.25 7V3C17.25 2.86614 17.3661 2.75 17.5 2.75Z" stroke="white" stroke-opacity="0.1" />
              <path d="M17.4999 7.75C17.3099 7.75 17.1199 7.68 16.9699 7.53C16.6799 7.24 16.6799 6.76 16.9699 6.47L21.9699 1.47C22.2599 1.18 22.7399 1.18 23.0299 1.47C23.3199 1.76 23.3199 2.24 23.0299 2.53L18.0299 7.53C17.8799 7.68 17.6899 7.75 17.4999 7.75Z" fill="white" />
            </svg>
          </span>
          Thanh toán
        </button>
      </div>

      <Sheet visible={openCart} onClose={() => setOpenCart(false)}>
        {/* Header summary */}
        <div className="pt-4 px-4 mb-2">
          <div className="flex items-center justify-between pb-6 border-b">
            <p className="text-[18px] font-bold text-[#334155]">Giỏ hàng</p>
            <button onClick={() => setOpenCart(false)} className="py-2 px-6 rounded-full border">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
                <path d="M10.2912 0.294045C10.6818 -0.0964719 11.3148 -0.0964767 11.7053 0.294045C12.0958 0.684568 12.0958 1.31759 11.7053 1.70811L7.41136 6.00108L11.7043 10.294L11.7727 10.3692C12.0933 10.762 12.0705 11.3419 11.7043 11.7081C11.3381 12.0743 10.7582 12.0971 10.3655 11.7765L10.2903 11.7081L5.9973 7.41514L1.70531 11.7081L1.63011 11.7765C1.23734 12.0971 0.657448 12.0743 0.291245 11.7081C-0.0749566 11.3419 -0.0977008 10.762 0.222886 10.3692L0.291245 10.294L4.58324 6.00108L0.290269 1.70811C-0.100256 1.31758 -0.100256 0.68457 0.290269 0.294045C0.680793 -0.096479 1.31381 -0.096479 1.70433 0.294045L5.9973 4.58701L10.2912 0.294045Z" fill="#78726D" />
              </svg>
            </button>
          </div>
          <div className="mt-6 mb-3 flex items-center justify-between text-[13px] text-gray-500">
            <span>SP đã thêm</span>
            <span className="text-[20px] font-semibold text-gray-900">{items.length.toString().padStart(2, "0")}</span>
          </div>
          <div className="mb-3 flex items-center justify-between text-[13px] text-gray-500">
            <span>Tổng cộng</span>
            <span className="text-[28px] font-semibold tracking-tight text-gray-900">{formatVND(items.reduce((s, i) => s + i.price, 0))}</span>
          </div>
        </div>


        {/* List */}
        <div className="space-y-4 pb-8 px-4">
          {items.map((it) => (
            <CartRow key={it.id} item={it} qty={1} />
          ))}
        </div>

        <div className="px-4">
          <button onClick={() => navigate("/pay")} className="flex items-center justify-center gap-3 h-14 w-full rounded-2xl bg-gradient-to-r from-[#FF9F2E] to-[#FF4D00] text-base font-semibold text-white shadow-[0_8px_16px_rgba(255,125,0,0.35)] active:scale-[0.99]">
            <span className="min-w-6">
              <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                <path d="M11.4502 8.23999H13.3301C14.3695 8.24004 15.25 9.12151 15.25 10.24C15.25 10.3738 15.1339 10.49 15 10.49C14.8661 10.49 14.75 10.3738 14.75 10.24C14.75 9.4554 14.1559 8.74004 13.3301 8.73999H11.4502C10.7328 8.73999 10.25 9.36837 10.25 10.0203C10.25 10.3137 10.2857 10.6144 10.4736 10.8552C10.6567 11.0896 10.9228 11.1781 11.0732 11.2312L11.0752 11.2322L14.085 12.282L14.0879 12.283C14.374 12.3814 14.656 12.5192 14.8682 12.7556C15.07 12.9807 15.25 13.342 15.25 13.9705C15.2498 14.9702 14.4677 15.7498 13.5498 15.7498H11.6699C10.6305 15.7497 9.75 14.8682 9.75 13.7498C9.75013 13.616 9.86622 13.4998 10 13.4998C10.1338 13.4998 10.2499 13.616 10.25 13.7498C10.25 14.5343 10.8441 15.2497 11.6699 15.2498H13.5498C14.2671 15.2498 14.7498 14.6222 14.75 13.9705C14.75 13.677 14.7144 13.3754 14.5264 13.1345C14.3433 12.9002 14.0772 12.8116 13.9268 12.7585L13.9248 12.7576L10.915 11.7078L10.9121 11.7068C10.626 11.6084 10.344 11.4715 10.1318 11.2351C9.92993 11.0101 9.75005 10.6489 9.75 10.0203C9.75 9.02885 10.5336 8.23999 11.4502 8.23999Z" fill="white" />
                <path d="M11.4502 8.23999H13.3301C14.3695 8.24004 15.25 9.12151 15.25 10.24C15.25 10.3738 15.1339 10.49 15 10.49C14.8661 10.49 14.75 10.3738 14.75 10.24C14.75 9.4554 14.1559 8.74004 13.3301 8.73999H11.4502C10.7328 8.73999 10.25 9.36837 10.25 10.0203C10.25 10.3137 10.2857 10.6144 10.4736 10.8552C10.6567 11.0896 10.9228 11.1781 11.0732 11.2312L11.0752 11.2322L14.085 12.282L14.0879 12.283C14.374 12.3814 14.656 12.5192 14.8682 12.7556C15.07 12.9807 15.25 13.342 15.25 13.9705C15.2498 14.9702 14.4677 15.7498 13.5498 15.7498H11.6699C10.6305 15.7497 9.75 14.8682 9.75 13.7498C9.75013 13.616 9.86622 13.4998 10 13.4998C10.1338 13.4998 10.2499 13.616 10.25 13.7498C10.25 14.5343 10.8441 15.2497 11.6699 15.2498H13.5498C14.2671 15.2498 14.7498 14.6222 14.75 13.9705C14.75 13.677 14.7144 13.3754 14.5264 13.1345C14.3433 12.9002 14.0772 12.8116 13.9268 12.7585L13.9248 12.7576L10.915 11.7078L10.9121 11.7068C10.626 11.6084 10.344 11.4715 10.1318 11.2351C9.92993 11.0101 9.75005 10.6489 9.75 10.0203C9.75 9.02885 10.5336 8.23999 11.4502 8.23999Z" stroke="white" />
                <path d="M11.4502 8.23999H13.3301C14.3695 8.24004 15.25 9.12151 15.25 10.24C15.25 10.3738 15.1339 10.49 15 10.49C14.8661 10.49 14.75 10.3738 14.75 10.24C14.75 9.4554 14.1559 8.74004 13.3301 8.73999H11.4502C10.7328 8.73999 10.25 9.36837 10.25 10.0203C10.25 10.3137 10.2857 10.6144 10.4736 10.8552C10.6567 11.0896 10.9228 11.1781 11.0732 11.2312L11.0752 11.2322L14.085 12.282L14.0879 12.283C14.374 12.3814 14.656 12.5192 14.8682 12.7556C15.07 12.9807 15.25 13.342 15.25 13.9705C15.2498 14.9702 14.4677 15.7498 13.5498 15.7498H11.6699C10.6305 15.7497 9.75 14.8682 9.75 13.7498C9.75013 13.616 9.86622 13.4998 10 13.4998C10.1338 13.4998 10.2499 13.616 10.25 13.7498C10.25 14.5343 10.8441 15.2497 11.6699 15.2498H13.5498C14.2671 15.2498 14.7498 14.6222 14.75 13.9705C14.75 13.677 14.7144 13.3754 14.5264 13.1345C14.3433 12.9002 14.0772 12.8116 13.9268 12.7585L13.9248 12.7576L10.915 11.7078L10.9121 11.7068C10.626 11.6084 10.344 11.4715 10.1318 11.2351C9.92993 11.0101 9.75005 10.6489 9.75 10.0203C9.75 9.02885 10.5336 8.23999 11.4502 8.23999Z" stroke="white" stroke-opacity="0.1" />
                <path d="M12.5 7.25C12.6339 7.25 12.75 7.36614 12.75 7.5V16.5C12.75 16.6339 12.6339 16.75 12.5 16.75C12.3661 16.75 12.25 16.6339 12.25 16.5V7.5C12.25 7.36614 12.3661 7.25 12.5 7.25Z" fill="white" />
                <path d="M12.5 7.25C12.6339 7.25 12.75 7.36614 12.75 7.5V16.5C12.75 16.6339 12.6339 16.75 12.5 16.75C12.3661 16.75 12.25 16.6339 12.25 16.5V7.5C12.25 7.36614 12.3661 7.25 12.5 7.25Z" stroke="white" />
                <path d="M12.5 7.25C12.6339 7.25 12.75 7.36614 12.75 7.5V16.5C12.75 16.6339 12.6339 16.75 12.5 16.75C12.3661 16.75 12.25 16.6339 12.25 16.5V7.5C12.25 7.36614 12.3661 7.25 12.5 7.25Z" stroke="white" stroke-opacity="0.1" />
                <path d="M12.5 1.75C12.6339 1.75 12.75 1.86614 12.75 2C12.75 2.13386 12.6339 2.25 12.5 2.25C7.12386 2.25 2.75 6.62386 2.75 12C2.75 17.3761 7.12386 21.75 12.5 21.75C17.8761 21.75 22.25 17.3761 22.25 12C22.25 11.8661 22.3661 11.75 22.5 11.75C22.6339 11.75 22.75 11.8661 22.75 12C22.75 17.6539 18.1539 22.25 12.5 22.25C6.84614 22.25 2.25 17.6539 2.25 12C2.25 6.34614 6.84614 1.75 12.5 1.75Z" fill="white" />
                <path d="M12.5 1.75C12.6339 1.75 12.75 1.86614 12.75 2C12.75 2.13386 12.6339 2.25 12.5 2.25C7.12386 2.25 2.75 6.62386 2.75 12C2.75 17.3761 7.12386 21.75 12.5 21.75C17.8761 21.75 22.25 17.3761 22.25 12C22.25 11.8661 22.3661 11.75 22.5 11.75C22.6339 11.75 22.75 11.8661 22.75 12C22.75 17.6539 18.1539 22.25 12.5 22.25C6.84614 22.25 2.25 17.6539 2.25 12C2.25 6.34614 6.84614 1.75 12.5 1.75Z" stroke="white" />
                <path d="M12.5 1.75C12.6339 1.75 12.75 1.86614 12.75 2C12.75 2.13386 12.6339 2.25 12.5 2.25C7.12386 2.25 2.75 6.62386 2.75 12C2.75 17.3761 7.12386 21.75 12.5 21.75C17.8761 21.75 22.25 17.3761 22.25 12C22.25 11.8661 22.3661 11.75 22.5 11.75C22.6339 11.75 22.75 11.8661 22.75 12C22.75 17.6539 18.1539 22.25 12.5 22.25C6.84614 22.25 2.25 17.6539 2.25 12C2.25 6.34614 6.84614 1.75 12.5 1.75Z" stroke="white" stroke-opacity="0.1" />
                <path d="M17.5 2.75C17.6339 2.75 17.75 2.86614 17.75 3V6.75H21.5C21.6339 6.75 21.75 6.86614 21.75 7C21.75 7.13386 21.6339 7.25 21.5 7.25H17.5C17.3661 7.25 17.25 7.13386 17.25 7V3C17.25 2.86614 17.3661 2.75 17.5 2.75Z" fill="white" />
                <path d="M17.5 2.75C17.6339 2.75 17.75 2.86614 17.75 3V6.75H21.5C21.6339 6.75 21.75 6.86614 21.75 7C21.75 7.13386 21.6339 7.25 21.5 7.25H17.5C17.3661 7.25 17.25 7.13386 17.25 7V3C17.25 2.86614 17.3661 2.75 17.5 2.75Z" stroke="white" />
                <path d="M17.5 2.75C17.6339 2.75 17.75 2.86614 17.75 3V6.75H21.5C21.6339 6.75 21.75 6.86614 21.75 7C21.75 7.13386 21.6339 7.25 21.5 7.25H17.5C17.3661 7.25 17.25 7.13386 17.25 7V3C17.25 2.86614 17.3661 2.75 17.5 2.75Z" stroke="white" stroke-opacity="0.1" />
                <path d="M17.4999 7.75C17.3099 7.75 17.1199 7.68 16.9699 7.53C16.6799 7.24 16.6799 6.76 16.9699 6.47L21.9699 1.47C22.2599 1.18 22.7399 1.18 23.0299 1.47C23.3199 1.76 23.3199 2.24 23.0299 2.53L18.0299 7.53C17.8799 7.68 17.6899 7.75 17.4999 7.75Z" fill="white" />
              </svg>
            </span>
            Thanh toán
          </button>
        </div>
      </Sheet>
    </div>
  );
}


/* ---------------- Rows ---------------- */
function CartRow({ item, qty }: { item: CartItem; qty: number }) {
  return (
    <div className="relative overflow-hidden rounded-[24px] border border-[#E5E7EB] bg-white px-3 py-3 shadow-[0_6px_20px_rgba(0,0,0,0.06)]">
      <div className="flex items-center gap-3">
        {/* Thumb */}
        <div className="h-16 w-16 overflow-hidden rounded-2xl bg-gray-100">
          <img src={item.img} alt={item.name} className="h-full w-full object-cover" />
        </div>


        {/* Info */}
        <div className="flex min-w-0 flex-1 flex-col">
          <div className="truncate text-[16px] font-semibold text-gray-800">{item.name}</div>
          <div className="mt-1 text-[14px] text-gray-500">
            {formatVND(item.price)}
            <span className="ml-1 align-middle text-[12px]">đ</span>
          </div>
        </div>


        {/* Qty controls */}
        <div className="ml-2 flex items-center gap-4">
          <RoundBtn aria-label="Giảm">
            <MinusIcon />
          </RoundBtn>
          <div className="w-3 text-center text-[16px] font-medium text-gray-800">{qty}</div>
          <RoundBtn aria-label="Tăng">
            <PlusIcon />
          </RoundBtn>
        </div>
      </div>
    </div>
  );
}

function PlaceholderIcon() {
  return (
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="mx-auto my-2 text-gray-400">
      <rect x="3" y="3" width="18" height="18" rx="2" />
      <path d="M3 17l5-5 4 4 5-6 4 5" />
    </svg>
  );
}

function RoundBtn({ children, ...rest }: React.ButtonHTMLAttributes<HTMLButtonElement>) {
  return (
    <button
      {...rest}
      className="grid h-12 w-12 place-items-center rounded-full border border-[#E5E7EB] bg-white shadow-[0_6px_12px_rgba(0,0,0,0.06)] active:scale-[0.98]"
    >
      {children}
    </button>
  );
}

/* ---------------- Types & utils ---------------- */
interface CartItem { id: string; name: string; price: number; img: string; }
function formatVND(n: number) {
  return new Intl.NumberFormat("vi-VN").format(n);
}


/* ---------------- Icons ---------------- */
function MinusIcon() {
  return (
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" strokeWidth="2">
      <path d="M6 12h12" strokeLinecap="round" />
    </svg>
  );
}
function PlusIcon() {
  return (
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#111827" strokeWidth="2">
      <path d="M12 6v12M6 12h12" strokeLinecap="round" />
    </svg>
  );
}